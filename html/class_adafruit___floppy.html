<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Adafruit Library: Adafruit_Floppy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Adafruit Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_adafruit___floppy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Adafruit_Floppy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A helper class for chattin with floppy drives.  
 <a href="class_adafruit___floppy.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_adafruit___floppy_8h_source.html">Adafruit_Floppy.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abde4580fa7f965c87b9e434f85d62178"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#abde4580fa7f965c87b9e434f85d62178">Adafruit_Floppy</a> (int8_t densitypin, int8_t indexpin, int8_t selectpin, int8_t motorpin, int8_t directionpin, int8_t steppin, int8_t wrdatapin, int8_t wrgatepin, int8_t track0pin, int8_t protectpin, int8_t rddatapin, int8_t sidepin, int8_t readypin)</td></tr>
<tr class="memdesc:abde4580fa7f965c87b9e434f85d62178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a hardware interface to a floppy drive.  <a href="#abde4580fa7f965c87b9e434f85d62178">More...</a><br /></td></tr>
<tr class="separator:abde4580fa7f965c87b9e434f85d62178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f0c679ef02d40f4f6689dab4aad0cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a77f0c679ef02d40f4f6689dab4aad0cd">begin</a> (void)</td></tr>
<tr class="memdesc:a77f0c679ef02d40f4f6689dab4aad0cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the GPIO pins but do not start the motor or anything.  <a href="#a77f0c679ef02d40f4f6689dab4aad0cd">More...</a><br /></td></tr>
<tr class="separator:a77f0c679ef02d40f4f6689dab4aad0cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f3757c13bcdd4762251f5cbb11429a"><td class="memItemLeft" align="right" valign="top"><a id="a88f3757c13bcdd4762251f5cbb11429a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a88f3757c13bcdd4762251f5cbb11429a">soft_reset</a> (void)</td></tr>
<tr class="memdesc:a88f3757c13bcdd4762251f5cbb11429a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set back the object and pins to initial state. <br /></td></tr>
<tr class="separator:a88f3757c13bcdd4762251f5cbb11429a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa834c961dc31de44751f7178b33efaaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#aa834c961dc31de44751f7178b33efaaf">select</a> (bool selected)</td></tr>
<tr class="memdesc:aa834c961dc31de44751f7178b33efaaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to select this drive.  <a href="#aa834c961dc31de44751f7178b33efaaf">More...</a><br /></td></tr>
<tr class="separator:aa834c961dc31de44751f7178b33efaaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3bb1389a8c7e0257f49652d4ca6d0d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#ab3bb1389a8c7e0257f49652d4ca6d0d6">spin_motor</a> (bool motor_on)</td></tr>
<tr class="memdesc:ab3bb1389a8c7e0257f49652d4ca6d0d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on or off the floppy motor, if on we wait till we get an index pulse!  <a href="#ab3bb1389a8c7e0257f49652d4ca6d0d6">More...</a><br /></td></tr>
<tr class="separator:ab3bb1389a8c7e0257f49652d4ca6d0d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3bc89a334cb15158c79b20a2264ba7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a7b3bc89a334cb15158c79b20a2264ba7">goto_track</a> (uint8_t <a class="el" href="class_adafruit___floppy.html#a01d32d5a68ed4198ea3613cb45317d90">track</a>)</td></tr>
<tr class="memdesc:a7b3bc89a334cb15158c79b20a2264ba7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seek to the desired track, requires the motor to be spun up!  <a href="#a7b3bc89a334cb15158c79b20a2264ba7">More...</a><br /></td></tr>
<tr class="separator:a7b3bc89a334cb15158c79b20a2264ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b3ad9b8f1f00de062ce6e2fb9f1a55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a80b3ad9b8f1f00de062ce6e2fb9f1a55">side</a> (uint8_t head)</td></tr>
<tr class="memdesc:a80b3ad9b8f1f00de062ce6e2fb9f1a55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Which head/side to read from.  <a href="#a80b3ad9b8f1f00de062ce6e2fb9f1a55">More...</a><br /></td></tr>
<tr class="separator:a80b3ad9b8f1f00de062ce6e2fb9f1a55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d32d5a68ed4198ea3613cb45317d90"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a01d32d5a68ed4198ea3613cb45317d90">track</a> (void)</td></tr>
<tr class="memdesc:a01d32d5a68ed4198ea3613cb45317d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current track location, based on internal caching.  <a href="#a01d32d5a68ed4198ea3613cb45317d90">More...</a><br /></td></tr>
<tr class="separator:a01d32d5a68ed4198ea3613cb45317d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40acef58cd980ccee3be3801b0c36624"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a40acef58cd980ccee3be3801b0c36624">step</a> (bool dir, uint8_t times)</td></tr>
<tr class="memdesc:a40acef58cd980ccee3be3801b0c36624"><td class="mdescLeft">&#160;</td><td class="mdescRight">Step the track motor.  <a href="#a40acef58cd980ccee3be3801b0c36624">More...</a><br /></td></tr>
<tr class="separator:a40acef58cd980ccee3be3801b0c36624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad035d61f64d3485a6f5923ae60e57425"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#ad035d61f64d3485a6f5923ae60e57425">read_track_mfm</a> (uint8_t *sectors, size_t n_sectors, uint8_t *sector_validity, bool high_density=true)</td></tr>
<tr class="memdesc:ad035d61f64d3485a6f5923ae60e57425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capture and decode one track of MFM data.  <a href="#ad035d61f64d3485a6f5923ae60e57425">More...</a><br /></td></tr>
<tr class="separator:ad035d61f64d3485a6f5923ae60e57425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aeff2c9fc767496883ae58ca87c3da6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a3aeff2c9fc767496883ae58ca87c3da6">capture_track</a> (volatile uint8_t *pulses, uint32_t max_pulses, uint32_t *falling_index_offset, bool store_greaseweazle=false, uint32_t capture_ms=0) __attribute__((optimize(&quot;O3&quot;)))</td></tr>
<tr class="memdesc:a3aeff2c9fc767496883ae58ca87c3da6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capture one track's worth of flux transitions, between two falling index pulses.  <a href="#a3aeff2c9fc767496883ae58ca87c3da6">More...</a><br /></td></tr>
<tr class="separator:a3aeff2c9fc767496883ae58ca87c3da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81fda8ea9f7770bf76fa55c262897c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#af81fda8ea9f7770bf76fa55c262897c7">write_track</a> (uint8_t *pulses, uint32_t num_pulses, bool store_greaseweazle=false) __attribute__((optimize(&quot;O3&quot;)))</td></tr>
<tr class="memdesc:af81fda8ea9f7770bf76fa55c262897c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one track of flux pulse data, starting at the index pulse.  <a href="#af81fda8ea9f7770bf76fa55c262897c7">More...</a><br /></td></tr>
<tr class="separator:af81fda8ea9f7770bf76fa55c262897c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae689c8679faffd92690e08aedaf23d73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#ae689c8679faffd92690e08aedaf23d73">print_pulse_bins</a> (uint8_t *pulses, uint32_t num_pulses, uint8_t max_bins=64, bool is_gw_format=false)</td></tr>
<tr class="memdesc:ae689c8679faffd92690e08aedaf23d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pretty print a simple histogram of flux transitions.  <a href="#ae689c8679faffd92690e08aedaf23d73">More...</a><br /></td></tr>
<tr class="separator:ae689c8679faffd92690e08aedaf23d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71ee07c030519cb0f0d8cc937df91fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#ad71ee07c030519cb0f0d8cc937df91fc">print_pulses</a> (uint8_t *pulses, uint32_t num_pulses, bool is_gw_format=false)</td></tr>
<tr class="memdesc:ad71ee07c030519cb0f0d8cc937df91fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pretty print the counts in a list of flux transitions.  <a href="#ad71ee07c030519cb0f0d8cc937df91fc">More...</a><br /></td></tr>
<tr class="separator:ad71ee07c030519cb0f0d8cc937df91fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e771bb66e6b9a02d46f41a752ebb06f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a5e771bb66e6b9a02d46f41a752ebb06f">getSampleFrequency</a> (void)</td></tr>
<tr class="memdesc:a5e771bb66e6b9a02d46f41a752ebb06f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the sample rate that we read and emit pulses at, platform and implementation-dependant.  <a href="#a5e771bb66e6b9a02d46f41a752ebb06f">More...</a><br /></td></tr>
<tr class="separator:a5e771bb66e6b9a02d46f41a752ebb06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0e6de66f3190366f020bca52dc46f5d4"><td class="memItemLeft" align="right" valign="top"><a id="a0e6de66f3190366f020bca52dc46f5d4"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a0e6de66f3190366f020bca52dc46f5d4">led_pin</a> = LED_BUILTIN</td></tr>
<tr class="memdesc:a0e6de66f3190366f020bca52dc46f5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug LED output for tracing. <br /></td></tr>
<tr class="separator:a0e6de66f3190366f020bca52dc46f5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d794ce69e2f90b8c51f9127302b03d"><td class="memItemLeft" align="right" valign="top"><a id="a69d794ce69e2f90b8c51f9127302b03d"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a69d794ce69e2f90b8c51f9127302b03d">select_delay_us</a> = 10</td></tr>
<tr class="memdesc:a69d794ce69e2f90b8c51f9127302b03d"><td class="mdescLeft">&#160;</td><td class="mdescRight">delay after drive select (usecs) <br /></td></tr>
<tr class="separator:a69d794ce69e2f90b8c51f9127302b03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e0838836537c6aeb1fdb97304f0f47"><td class="memItemLeft" align="right" valign="top"><a id="a19e0838836537c6aeb1fdb97304f0f47"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a19e0838836537c6aeb1fdb97304f0f47">step_delay_us</a> = 10000</td></tr>
<tr class="memdesc:a19e0838836537c6aeb1fdb97304f0f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">delay between head steps (usecs) <br /></td></tr>
<tr class="separator:a19e0838836537c6aeb1fdb97304f0f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6578b1158e87b5a5d98d624e7b453c"><td class="memItemLeft" align="right" valign="top"><a id="afb6578b1158e87b5a5d98d624e7b453c"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#afb6578b1158e87b5a5d98d624e7b453c">settle_delay_ms</a> = 15</td></tr>
<tr class="memdesc:afb6578b1158e87b5a5d98d624e7b453c"><td class="mdescLeft">&#160;</td><td class="mdescRight">settle delay after seek (msecs) <br /></td></tr>
<tr class="separator:afb6578b1158e87b5a5d98d624e7b453c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3e1ed416c4e12511b9c27b3e1d06778"><td class="memItemLeft" align="right" valign="top"><a id="af3e1ed416c4e12511b9c27b3e1d06778"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#af3e1ed416c4e12511b9c27b3e1d06778">motor_delay_ms</a> = 1000</td></tr>
<tr class="memdesc:af3e1ed416c4e12511b9c27b3e1d06778"><td class="mdescLeft">&#160;</td><td class="mdescRight">delay after motor on (msecs) <br /></td></tr>
<tr class="separator:af3e1ed416c4e12511b9c27b3e1d06778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb6248d3cd18e23d3b87d90ad75f18a8"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#abb6248d3cd18e23d3b87d90ad75f18a8">watchdog_delay_ms</a></td></tr>
<tr class="memdesc:abb6248d3cd18e23d3b87d90ad75f18a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">quiescent time until drives reset (msecs)  <a href="#abb6248d3cd18e23d3b87d90ad75f18a8">More...</a><br /></td></tr>
<tr class="separator:abb6248d3cd18e23d3b87d90ad75f18a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae042ab862f4141df7e4299d460478a92"><td class="memItemLeft" align="right" valign="top"><a id="ae042ab862f4141df7e4299d460478a92"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#ae042ab862f4141df7e4299d460478a92">bus_type</a> = BUSTYPE_IBMPC</td></tr>
<tr class="memdesc:ae042ab862f4141df7e4299d460478a92"><td class="mdescLeft">&#160;</td><td class="mdescRight">what kind of floppy drive we're using <br /></td></tr>
<tr class="separator:ae042ab862f4141df7e4299d460478a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef0961d7e6c57d7766312ad8dac2835"><td class="memItemLeft" align="right" valign="top"><a id="a4ef0961d7e6c57d7766312ad8dac2835"></a>
Stream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_adafruit___floppy.html#a4ef0961d7e6c57d7766312ad8dac2835">debug_serial</a> = NULL</td></tr>
<tr class="memdesc:a4ef0961d7e6c57d7766312ad8dac2835"><td class="mdescLeft">&#160;</td><td class="mdescRight">optional debug stream for serial output <br /></td></tr>
<tr class="separator:a4ef0961d7e6c57d7766312ad8dac2835"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A helper class for chattin with floppy drives. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abde4580fa7f965c87b9e434f85d62178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde4580fa7f965c87b9e434f85d62178">&#9670;&nbsp;</a></span>Adafruit_Floppy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_Floppy::Adafruit_Floppy </td>
          <td>(</td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>densitypin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>indexpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>selectpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>motorpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>directionpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>steppin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>wrdatapin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>wrgatepin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>track0pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>protectpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>rddatapin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>sidepin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>readypin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a hardware interface to a floppy drive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">densitypin</td><td>A pin connected to the floppy Density Select input </td></tr>
    <tr><td class="paramname">indexpin</td><td>A pin connected to the floppy Index Sensor output </td></tr>
    <tr><td class="paramname">selectpin</td><td>A pin connected to the floppy Drive Select input </td></tr>
    <tr><td class="paramname">motorpin</td><td>A pin connected to the floppy Motor Enable input </td></tr>
    <tr><td class="paramname">directionpin</td><td>A pin connected to the floppy Stepper Direction input </td></tr>
    <tr><td class="paramname">steppin</td><td>A pin connected to the floppy Stepper input </td></tr>
    <tr><td class="paramname">wrdatapin</td><td>A pin connected to the floppy Write Data input </td></tr>
    <tr><td class="paramname">wrgatepin</td><td>A pin connected to the floppy Write Gate input </td></tr>
    <tr><td class="paramname">track0pin</td><td>A pin connected to the floppy Track 00 Sensor output </td></tr>
    <tr><td class="paramname">protectpin</td><td>A pin connected to the floppy Write Protect Sensor output </td></tr>
    <tr><td class="paramname">rddatapin</td><td>A pin connected to the floppy Read Data output </td></tr>
    <tr><td class="paramname">sidepin</td><td>A pin connected to the floppy Side Select input </td></tr>
    <tr><td class="paramname">readypin</td><td>A pin connected to the floppy Ready/Disk Change output </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a77f0c679ef02d40f4f6689dab4aad0cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77f0c679ef02d40f4f6689dab4aad0cd">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_Floppy::begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the GPIO pins but do not start the motor or anything. </p>
<dl class="section return"><dt>Returns</dt><dd>True if able to set up all pins and capture/waveform peripherals </dd></dl>

</div>
</div>
<a id="aa834c961dc31de44751f7178b33efaaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa834c961dc31de44751f7178b33efaaf">&#9670;&nbsp;</a></span>select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_Floppy::select </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>selected</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether to select this drive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">selected</td><td>True to select/enable </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab3bb1389a8c7e0257f49652d4ca6d0d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3bb1389a8c7e0257f49652d4ca6d0d6">&#9670;&nbsp;</a></span>spin_motor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_Floppy::spin_motor </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>motor_on</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on or off the floppy motor, if on we wait till we get an index pulse! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_on</td><td>True to turn on motor, False to turn it off </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False if turning motor on and no index pulse found, true otherwise </dd></dl>

</div>
</div>
<a id="a7b3bc89a334cb15158c79b20a2264ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b3bc89a334cb15158c79b20a2264ba7">&#9670;&nbsp;</a></span>goto_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Adafruit_Floppy::goto_track </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>track_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seek to the desired track, requires the motor to be spun up! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">track_num</td><td>The track to step to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True If we were able to get to the track location </dd></dl>

</div>
</div>
<a id="a80b3ad9b8f1f00de062ce6e2fb9f1a55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80b3ad9b8f1f00de062ce6e2fb9f1a55">&#9670;&nbsp;</a></span>side()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_Floppy::side </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Which head/side to read from. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>Head 0 or 1 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01d32d5a68ed4198ea3613cb45317d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01d32d5a68ed4198ea3613cb45317d90">&#9670;&nbsp;</a></span>track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t Adafruit_Floppy::track </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current track location, based on internal caching. </p>
<dl class="section return"><dt>Returns</dt><dd>The cached track location </dd></dl>

</div>
</div>
<a id="a40acef58cd980ccee3be3801b0c36624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40acef58cd980ccee3be3801b0c36624">&#9670;&nbsp;</a></span>step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_Floppy::step </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>times</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Step the track motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>STEP_OUT or STEP_IN depending on desired direction </td></tr>
    <tr><td class="paramname">times</td><td>How many steps to take </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad035d61f64d3485a6f5923ae60e57425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad035d61f64d3485a6f5923ae60e57425">&#9670;&nbsp;</a></span>read_track_mfm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_Floppy::read_track_mfm </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>sectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n_sectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>sector_validity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>high_density</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capture and decode one track of MFM data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectors</td><td>A pointer to an array of memory we can use to store into, 512*n_sectors bytes </td></tr>
    <tr><td class="paramname">n_sectors</td><td>The number of sectors (e.g., 18 for a standard 3.5", 1.44MB format) </td></tr>
    <tr><td class="paramname">sector_validity</td><td>An array of values set to 1 if the sector was captured, 0 if not captured (no IDAM, CRC error, etc) </td></tr>
    <tr><td class="paramname">high_density</td><td>Whether the diskette is high density (HD) encoded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of sectors we actually captured </dd></dl>

</div>
</div>
<a id="a3aeff2c9fc767496883ae58ca87c3da6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aeff2c9fc767496883ae58ca87c3da6">&#9670;&nbsp;</a></span>capture_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_Floppy::capture_track </td>
          <td>(</td>
          <td class="paramtype">volatile uint8_t *&#160;</td>
          <td class="paramname"><em>pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>falling_index_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>store_greaseweazle</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>capture_ms</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capture one track's worth of flux transitions, between two falling index pulses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulses</td><td>A pointer to an array of memory we can use to store into </td></tr>
    <tr><td class="paramname">max_pulses</td><td>The size of the allocated pulses array </td></tr>
    <tr><td class="paramname">falling_index_offset</td><td>Pointer to a uint32_t where we will store the "flux index" where the second index pulse fell. usually we read 110-125% of one track so there is an overlap of index pulse reads </td></tr>
    <tr><td class="paramname">store_greaseweazle</td><td>Pass in true to pack long pulses with two bytes </td></tr>
    <tr><td class="paramname">capture_ms</td><td>If not zero, we will capture at least one revolution and extra time will be determined by this variable. e.g. 250ms means one revolution plus about 50 ms post-index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of pulses we actually captured </dd></dl>

</div>
</div>
<a id="af81fda8ea9f7770bf76fa55c262897c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af81fda8ea9f7770bf76fa55c262897c7">&#9670;&nbsp;</a></span>write_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_Floppy::write_track </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>store_greaseweazle</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one track of flux pulse data, starting at the index pulse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulses</td><td>An array of timer-count pulses </td></tr>
    <tr><td class="paramname">num_pulses</td><td>How many bytes are in the pulse array </td></tr>
    <tr><td class="paramname">store_greaseweazle</td><td>If true, long pulses are 'packed' in gw format </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae689c8679faffd92690e08aedaf23d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae689c8679faffd92690e08aedaf23d73">&#9670;&nbsp;</a></span>print_pulse_bins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_Floppy::print_pulse_bins </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>max_bins</em> = <code>64</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_gw_format</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pretty print a simple histogram of flux transitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulses</td><td>A pointer to an array of memory containing pulse counts </td></tr>
    <tr><td class="paramname">num_pulses</td><td>The size of the pulses in the array </td></tr>
    <tr><td class="paramname">max_bins</td><td>The maximum number of histogram bins to use (default 64) </td></tr>
    <tr><td class="paramname">is_gw_format</td><td>Set to true if we pack long pulses with two bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad71ee07c030519cb0f0d8cc937df91fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71ee07c030519cb0f0d8cc937df91fc">&#9670;&nbsp;</a></span>print_pulses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Adafruit_Floppy::print_pulses </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_pulses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_gw_format</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pretty print the counts in a list of flux transitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulses</td><td>A pointer to an array of memory containing pulse counts </td></tr>
    <tr><td class="paramname">num_pulses</td><td>The size of the pulses in the array </td></tr>
    <tr><td class="paramname">is_gw_format</td><td>Set to true if we pack long pulses with two bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e771bb66e6b9a02d46f41a752ebb06f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e771bb66e6b9a02d46f41a752ebb06f">&#9670;&nbsp;</a></span>getSampleFrequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Adafruit_Floppy::getSampleFrequency </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the sample rate that we read and emit pulses at, platform and implementation-dependant. </p>
<dl class="section return"><dt>Returns</dt><dd>Sample frequency in Hz, or 0 if not known </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abb6248d3cd18e23d3b87d90ad75f18a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb6248d3cd18e23d3b87d90ad75f18a8">&#9670;&nbsp;</a></span>watchdog_delay_ms</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit_Floppy::watchdog_delay_ms</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">      1000</div></div><!-- fragment -->
<p>quiescent time until drives reset (msecs) </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_adafruit___floppy_8h_source.html">Adafruit_Floppy.h</a></li>
<li>src/Adafruit_Floppy.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
